{"version":3,"file":"fileuploader.component.js","sourceRoot":"","sources":["../../src/fileuploader.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;;;2BAwB3C,IAAI,YAAY,EAAY;6BAC5B,EAAE;;IAE1B,0CAAU,GAAV,UAAW,KAAU;QACjB,IAAI,QAAQ,GAAa,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;QAC5C,IAAI,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAEvD,IAAI,OAAO,GAAG,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;QAE9C,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACV,EAAE,CAAC,CAAC,iBAAiB,IAAI,cAAc,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3F,QAAQ,GAAG,IAAI,CAAC;gBAChB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;aAC3B;YACD,IAAI,CAAC,CAAC;gBACF,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC;oBACjB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACvC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC,CAAC;4BAC7C,KAAK,CAAC,4BAA0B,IAAI,CAAC,WAAW,QAAK,CAAC,CAAC;4BACvD,QAAQ,GAAG,IAAI,CAAC;4BAChB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;4BACxB,MAAM,CAAC,KAAK,CAAC;yBAChB;qBACJ;gBAEL,IAAI,YAAY,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;gBAEvC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;oBACf,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,MAAM,GAAG,4BAA4B,CAAC;iBACvE;gBACD,IAAI,CAAC,CAAC;oBACF,IAAI,IAAI,GAAS,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAC7B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC;iBAClC;aACJ;YAED,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACnC;KACJ;;gBA5DJ,SAAS,SAAC;oBACP,QAAQ,EAAE,eAAe;oBACzB,QAAQ,EAAE,ooBAWP;oBACH,MAAM,EAAE,CAAC,mCACmB,CAAC;iBAChC;;;;;kCAEI,KAAK;6BACL,KAAK;6BACL,KAAK;gCACL,KAAK;gCACL,MAAM;;gCAxBX;;SAmBa,qBAAqB;AA4CjC,CAAC","sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'file-uploader',\r\n    template: `<div class=\"btn-toolbar mb-3\" role=\"toolbar\">\r\n    <div class=\"input-group\">\r\n        <div class=\"input-group-prepend\">\r\n            <label class=\"btn btn-primary\">\r\n                <span>Browse</span>...\r\n                <input type=\"file\" accept=\"{{fileType}}\" style=\"display: none;\" (change)=\"fileChange($event)\" [attr.multiple]=\"allowMultiple\">\r\n            </label>\r\n        </div>\r\n        <input type=\"text\" class=\"form-control\" [value]=\"DisplayedText\" disabled=\"\" [class.ng-invalid-right]=\"required && !DisplayedText\"\r\n            [class.ng-valid-right]=\"required && DisplayedText\">\r\n    </div>\r\n</div>`,    \r\n    styles: [`\r\n        label.btn{  margin: 0;}`]\r\n})\r\nexport class FileUploaderComponent {\r\n    @Input() allowMultiple: boolean;\r\n    @Input() fileType: string;\r\n    @Input() required: boolean;\r\n    @Input() maxSizeInKb: number;\r\n    @Output() onSelection = new EventEmitter<FileList>();\r\n    DisplayedText: string = \"\";\r\n\r\n    fileChange(event: any) {\r\n        let fileList: FileList = event.target.files;\r\n        let filetypeToCompare = this.fileType.replace('*', '');\r\n\r\n        let hasFile = fileList && fileList.length > 0;\r\n\r\n        if (hasFile) {\r\n            if (filetypeToCompare != \"application/\" && fileList[0].type.indexOf(filetypeToCompare) == -1) {\r\n                fileList = null;\r\n                this.DisplayedText = \"\";\r\n            }\r\n            else {\r\n                if (this.maxSizeInKb)\r\n                    for (let i = 0; i < fileList.length; i++) {\r\n                        if (fileList[i].size > this.maxSizeInKb * 1024) {\r\n                            alert(`File size is more than ${this.maxSizeInKb} Kb`);\r\n                            fileList = null;\r\n                            this.DisplayedText = \"\";\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                let multipleFile = fileList.length > 1;\r\n\r\n                if (multipleFile) {\r\n                    this.DisplayedText = fileList.length + ' file(s) has been selected';\r\n                }\r\n                else {\r\n                    let file: File = fileList[0];\r\n                    this.DisplayedText = file.name;\r\n                }\r\n            }\r\n\r\n            this.onSelection.emit(fileList);\r\n        }\r\n    }\r\n};\r\n"]}